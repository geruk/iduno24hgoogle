<div id="p2">
	<h2>Where should I click to download?</h2>

	<canvas id="downloadtrick" width="770" height="369"></canvas>

	<div style="height: 100px; padding: 20px;">
		<div class="alert alert-success"></div>
		<div class="alert alert-danger"></div>
	</div>
</div>

<script type="text/javascript">
	var canvas = document.getElementById("downloadtrick");
	var context = canvas.getContext("2d");
	var imgObj = new Image();

	imgObj.onload = function() {
		context.drawImage(imgObj, 0, 0);
	};

	imgObj.src = "img/downloadtrick2.png";

	function getMousePos(canvas, evt) {
		var rect = canvas.getBoundingClientRect();
		return {
			x: evt.clientX - rect.left,
			y: evt.clientY - rect.top
		};
	}

	canvas.addEventListener('mousemove', function(evt) {
		var mousePos = getMousePos(canvas, evt);
		if (mousePos.x > 493 && mousePos.x < 676 && mousePos.y > 63 && mousePos.y < 82) {
			evt.target.style.cursor = "pointer";
		} else if (mousePos.x > 38 && mousePos.x < 320 && mousePos.y > 179 && mousePos.y < 250) {
			evt.target.style.cursor = "pointer";
		} else if (mousePos.x > 500 && mousePos.x < 737 && mousePos.y > 190 && mousePos.y < 252) {
			evt.target.style.cursor = "pointer";
		} else {
			evt.target.style.cursor = "auto";
		}
		// writeMessage(canvas, message);
	}, false);

	canvas.addEventListener('click', function(evt) {
		var mousePos = getMousePos(canvas, evt);
		if (mousePos.x > 493 && mousePos.x < 676 && mousePos.y > 63 && mousePos.y < 82) {
			$("#p2 .alert-danger").hide();
			$("#p2 .alert-success").text("Good job. The others just look like ads, don't you think?").show().fadeOut(3500, function(){ complete_puzzle();
			});
		} else if (mousePos.x > 38 && mousePos.x < 320 && mousePos.y > 179 && mousePos.y < 250) {
			evt.target.style.cursor = "pointer";
			$("#p2 .alert-success").hide();
			$("#p2 .alert-danger").text("That's not quite right. Sometimes ads pretend to be the Download button.").show();
		} else if (mousePos.x > 500 && mousePos.x < 737 && mousePos.y > 190 && mousePos.y < 252) {
			evt.target.style.cursor = "pointer";
			$("#p2 .alert-success").hide();
			$("#p2 .alert-danger").text("That's not quite right. Sometimes ads pretend to be the Download button.").show();
		} else {
			evt.target.style.cursor = "auto";
		}
		// writeMessage(canvas, message);
	}, false);

	$(document).ready(function(){
		$(".alert").hide();
	});
</script>